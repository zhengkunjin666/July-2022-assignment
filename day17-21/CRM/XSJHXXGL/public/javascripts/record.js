const PAGE={init:function(){this.bind()},bind:function(){window.addEventListener("load",this.highlight),window.addEventListener("load",this.parseTime);let e=document.getElementById("select-container"),t=(e.addEventListener("mouseleave",this.selectHidden),this.onEventlister(e,"click","select-item",this.show),window.addEventListener("load",this.scorllBottom),document.getElementById("save")),n=(t.addEventListener("click",this.handlerUpdate),document.getElementById("add"));n.addEventListener("click",this.handlerInsert)},highlight:function(){let t=window.location.href,n=document.getElementsByClassName("nav-item");for(let e=0;e<n.length;e++){var a=n[e].dataset.id;-1!=t.indexOf(a)&&(n[e].className="nav-item active")}},parseTime:function(){let t=document.getElementsByClassName("time");for(let e=0;e<t.length;e++){dateTime=t[e].innerText;var n=PAGE.formatDate(dateTime);t[e].innerText="创建时间："+n}},formatDate:function(e,t="YY/MM/DD hh:mm:ss"){var e=new Date(e),n=e.getFullYear(),a=e.getMonth()+1,i=e.getDate(),d=e.getHours(),o=e.getMinutes(),e=e.getSeconds(),l=new Array(10).fill(0).map((e,t)=>"0"+t);return t.replace(/YY/g,n).replace(/MM/g,l[a]||a).replace(/DD/g,l[i]||i).replace(/hh/g,l[d]||d).replace(/mm/g,l[o]||o).replace(/ss/g,l[e]||e)},selectHidden:function(){let e=document.getElementById("select-list");e.style.display="none"},onEventlister:function(e,t,n,a){e.addEventListener(t,function(e){0<=e.target.className.indexOf(n)&&a(e)})},show:function(e){e=e.target;let t=document.getElementById("show");t.innerHTML=e.innerText},scorllBottom:function(){let e=document.getElementById("record-content");var t=e.scrollHeight;e.scrollTop=t},handlerUpdate:function(e){let t=e.target.dataset.id,n=document.getElementById("state").value.trim(),a=document.getElementById("show").innerText,i=document.getElementById("save-textarea").value,d=document.getElementById("csrf").value;if(!n||!a||!i)return confirm("缺少参数，确定要保存吗？")?void o():void 0;async function o(){var e=await fetch("/admin/clue",{method:"PUT",body:JSON.stringify({id:t,state:n,salesperson:a,comment:i,csrf:d}),headers:{"content-type":"application/json"}}).then(e=>e.json());200===e.code?(alert("保存成功！"),location.assign("/admin/clue/record?id="+t)):(alert("保存失败！"),console.log(e.data))}o()},handlerInsert:async function(e){var e=e.target.dataset.id,t=document.getElementById("add-textarea").value,n=document.getElementById("csrf").value,a=new Date;t?200===(t=await fetch("/admin/clue/record",{method:"POST",body:JSON.stringify({id:e,content:t,time:a,csrf:n}),headers:{"content-type":"application/json"}}).then(e=>e.json())).code?(alert("添加成功！"),location.assign("/admin/clue/record?id="+e)):(alert("添加失败！"),console.log(t.data)):alert("缺少参数！")}};PAGE.init();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY29yZC5qcyJdLCJuYW1lcyI6WyJQQUdFIiwiaW5pdCIsInRoaXMiLCJiaW5kIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhpZ2hsaWdodCIsInBhcnNlVGltZSIsInNlbGVjdENvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzYXZlIiwic2VsZWN0SGlkZGVuIiwib25FdmVudGxpc3RlciIsInNob3ciLCJzY29ybGxCb3R0b20iLCJhZGQiLCJoYW5kbGVyVXBkYXRlIiwiaGFuZGxlckluc2VydCIsImhyZWYiLCJsb2NhdGlvbiIsIm5hdkl0ZW0iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGV0IiwiaSIsImxlbmd0aCIsImlkIiwiZGF0YXNldCIsImNsYXNzTmFtZSIsInRpbWUiLCJkYXRlVGltZSIsImZvcm1hdERhdGUiLCJpbm5lclRleHQiLCJmb3JtYXQiLCJkYXRlIiwiRGF0ZSIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiZGF5IiwiZ2V0RGF0ZSIsImhvdXIiLCJnZXRNb250aCIsInNlYyIsInByZUFyciIsImdldEhvdXJzIiwiZmlsbCIsIm1hcCIsImVsZW0iLCJpbmRleCIsImdldE1pbnV0ZXMiLCJBcnJheSIsInJlcGxhY2UiLCJtaW4iLCJzZWxlY3RMaXN0Iiwic3R5bGUiLCJkaXNwbGF5IiwicGFyZW50Tm9kZSIsImluZGV4T2YiLCJjaGlsZENsYXNzTmFtZSIsImNhbGxiYWNrIiwiYWN0aW9uIiwiZSIsInRhcmdldCIsImlubmVySFRNTCIsInNlbGVjdEl0ZW0iLCJzY3JvbGxIZWlnaHQiLCJyZWNvcmRDb250ZW50Iiwic2Nyb2xsVG9wIiwic2FsZXNwZXJzb24iLCJzYXZlVGV4dGFyZWEiLCJ2YWx1ZSIsInRyaW0iLCJzdGF0ZSIsIm1lc3NhZ2UiLCJjb25maXJtIiwiYXN5bmMiLCJVcGRhdGVGZXRjaCIsImZldGNoIiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsImNzcmYiLCJjb250ZW50LXR5cGUiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwiY29kZSIsImFzc2lnbiIsImFsZXJ0IiwiY29uc29sZSIsImxvZyIsImRhdGEiLCJldmVudCIsImFkZFRleHRhcmVhIiwiYm9keSIsImNvbnRlbnQiLCJJbnNlcnRGZXRjaCIsImhlYWRlcnMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEtBQUksQ0FDTkMsS0FBTSxXQUNGQyxLQUFBQyxRQUVKQSxLQUFNLFdBQ0ZDLE9BQU9DLGlCQUFpQixPQUFPSCxLQUFLSSxXQUNwQ0YsT0FBT0MsaUJBQWlCLE9BQU9ILEtBQUtLLFdBQ2hDQyxJQUFBQSxFQUFnQkMsU0FBU0MsZUFBZSxvQkFJcENDLEdBSFJILEVBQWdCSCxpQkFBaUIsYUFBYUgsS0FBS1UsY0FDbkRWLEtBQUtXLGNBQWNMLEVBQWdCLFFBQVEsY0FBY04sS0FBS1ksTUFDOURWLE9BQU9DLGlCQUFpQixPQUFPSCxLQUFLYSxjQUMzQk4sU0FBU0MsZUFBZSxTQUUxQk0sR0FESEwsRUFBQ04saUJBQWlCLFFBQVFILEtBQUtlLGVBQzNCUixTQUFTQyxlQUFlLFFBQzVCTCxFQUFBQSxpQkFBaUIsUUFBUUgsS0FBS2dCLGdCQUV0Q1osVUFBVyxXQUNIYSxJQUFJQSxFQUFDZixPQUFPZ0IsU0FBU0QsS0FDckJFLEVBQVFaLFNBQVNhLHVCQUF1QixZQUM1QyxJQUFJQyxJQUFJQyxFQUFFLEVBQUVBLEVBQUVILEVBQVFJLE9BQU9ELElBQUksQ0FBN0JELElBQUtHLEVBQVRMLEVBQWNBLEdBQUFBLFFBQWRLLElBQ0ksR0FBT0wsRUFBQUEsUUFBV00sS0FFZE4sRUFBUUcsR0FBR0ksVUFBVSxxQkFFNUJyQixVQUFBLFdBeEJFZ0IsSUFBQU0sRUFBQXBCLFNBQUFhLHVCQUFBLFFBMEJQZixJQUFTZ0IsSUFBRUMsRUFBQSxFQUFBQSxFQUFBSyxFQUFVSixPQUFBRCxJQUFBLENBQ1RNLFNBQUNyQixFQUFTYSxHQUFBQSxVQUdkQyxJQUFJaEIsRUFBVVAsS0FBSytCLFdBQVdELFVBRjlCRCxFQUFN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LElBQUlNLEVBQVlMLE9BdkJwQkgsTUFBQ2hGLFdBMkJqQlQsS0FUUUMiLCJmaWxlIjoicmVjb3JkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUEFHRT17XHJcbiAgICBpbml0OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMuYmluZCgpO1xyXG4gICAgfSxcclxuICAgIGJpbmQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLHRoaXMuaGlnaGxpZ2h0KTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsdGhpcy5wYXJzZVRpbWUpO1xyXG4gICAgICAgIGxldCBzZWxlY3RDb250YWluZXI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdC1jb250YWluZXInKTtcclxuICAgICAgICBzZWxlY3RDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsdGhpcy5zZWxlY3RIaWRkZW4pO1xyXG4gICAgICAgIHRoaXMub25FdmVudGxpc3RlcihzZWxlY3RDb250YWluZXIsJ2NsaWNrJywnc2VsZWN0LWl0ZW0nLHRoaXMuc2hvdyk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLHRoaXMuc2NvcmxsQm90dG9tKTtcclxuICAgICAgICBsZXQgc2F2ZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZScpO1xyXG4gICAgICAgIHNhdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHRoaXMuaGFuZGxlclVwZGF0ZSk7XHJcbiAgICAgICAgbGV0IGFkZD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkJyk7XHJcbiAgICAgICAgYWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyx0aGlzLmhhbmRsZXJJbnNlcnQpO1xyXG4gICAgfSxcclxuICAgIGhpZ2hsaWdodDogZnVuY3Rpb24oKXtcclxuICAgICAgICBsZXQgaHJlZj13aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICBsZXQgbmF2SXRlbT1kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCduYXYtaXRlbScpO1xyXG4gICAgICAgIGZvcihsZXQgaT0wO2k8bmF2SXRlbS5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgbGV0IGlkPW5hdkl0ZW1baV0uZGF0YXNldC5pZDtcclxuICAgICAgICAgICAgaWYoaHJlZi5pbmRleE9mKGlkKSAhPSAtMSl7XHJcbiAgICAgICAgICAgICAgICBuYXZJdGVtW2ldLmNsYXNzTmFtZT1cIm5hdi1pdGVtIGFjdGl2ZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHBhcnNlVGltZTogZnVuY3Rpb24oKXtcclxuICAgICAgICBsZXQgdGltZT1kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0aW1lJyk7XHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTx0aW1lLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBkYXRlVGltZT10aW1lW2ldLmlubmVyVGV4dDtcclxuICAgICAgICAgICAgbGV0IHBhcnNlVGltZT1QQUdFLmZvcm1hdERhdGUoZGF0ZVRpbWUpO1xyXG4gICAgICAgICAgICB0aW1lW2ldLmlubmVyVGV4dD1g5Yib5bu65pe26Ze077yaJHtwYXJzZVRpbWV9YDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24odGltZSxmb3JtYXQ9J1lZL01NL0REIGhoOm1tOnNzJyl7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTtcclxuICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgbW9udGggPSBkYXRlLmdldE1vbnRoKCkrMSxcclxuICAgICAgICAgICAgZGF5ID0gZGF0ZS5nZXREYXRlKCksXHJcbiAgICAgICAgICAgIGhvdXIgPSBkYXRlLmdldEhvdXJzKCksXHJcbiAgICAgICAgICAgIG1pbiA9IGRhdGUuZ2V0TWludXRlcygpLFxyXG4gICAgICAgICAgICBzZWMgPSBkYXRlLmdldFNlY29uZHMoKTtcclxuICAgICAgICB2YXIgcHJlQXJyID0gbmV3IEFycmF5KDEwKS5maWxsKDApLm1hcCgoZWxlbSwgaW5kZXgpPT57XHJcbiAgICAgICAgICAgIHJldHVybiAnMCcraW5kZXg7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG5ld1RpbWUgPSBmb3JtYXQucmVwbGFjZSgvWVkvZyx5ZWFyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL01NL2cscHJlQXJyW21vbnRoXXx8bW9udGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvREQvZyxwcmVBcnJbZGF5XXx8ZGF5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL2hoL2cscHJlQXJyW2hvdXJdfHxob3VyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL21tL2cscHJlQXJyW21pbl18fG1pbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9zcy9nLHByZUFycltzZWNdfHxzZWMpO1xyXG4gICAgICAgIHJldHVybiBuZXdUaW1lO1x0XHRcdFxyXG4gICAgfSxcclxuICAgIHNlbGVjdEhpZGRlbjogZnVuY3Rpb24oKXtcclxuICAgICAgICBsZXQgc2VsZWN0TGlzdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0LWxpc3QnKTtcclxuICAgICAgICBzZWxlY3RMaXN0LnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XHJcbiAgICB9LFxyXG4gICAgb25FdmVudGxpc3RlcjogZnVuY3Rpb24ocGFyZW50Tm9kZSxhY3Rpb24sY2hpbGRDbGFzc05hbWUsY2FsbGJhY2spe1xyXG4gICAgICAgIHBhcmVudE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihhY3Rpb24sZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKGNoaWxkQ2xhc3NOYW1lKT49MCAmJiBjYWxsYmFjayhlKTtcclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuICAgIHNob3c6IGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICBsZXQgc2VsZWN0SXRlbT1ldmVudC50YXJnZXQ7XHJcbiAgICAgICAgbGV0IHNob3c9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3cnKTtcclxuICAgICAgICBzaG93LmlubmVySFRNTD1zZWxlY3RJdGVtLmlubmVyVGV4dDtcclxuICAgIH0sXHJcbiAgICBzY29ybGxCb3R0b206IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbGV0IHJlY29yZENvbnRlbnQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZC1jb250ZW50Jyk7XHJcbiAgICAgICAgbGV0IHNjcm9sbEhlaWdodD1yZWNvcmRDb250ZW50LnNjcm9sbEhlaWdodDtcclxuICAgICAgICByZWNvcmRDb250ZW50LnNjcm9sbFRvcD1zY3JvbGxIZWlnaHQ7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlclVwZGF0ZTogZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgIGxldCBpZD1ldmVudC50YXJnZXQuZGF0YXNldC5pZDtcclxuICAgICAgICBsZXQgc3RhdGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlJykudmFsdWUudHJpbSgpO1xyXG4gICAgICAgIGxldCBzYWxlc3BlcnNvbj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvdycpLmlubmVyVGV4dDtcclxuICAgICAgICBsZXQgc2F2ZVRleHRhcmVhPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlLXRleHRhcmVhJykudmFsdWU7XHJcbiAgICAgICAgbGV0IGNzcmY9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NzcmYnKS52YWx1ZTtcclxuICAgICAgICBpZighc3RhdGUgfHwgIXNhbGVzcGVyc29uIHx8ICFzYXZlVGV4dGFyZWEpe1xyXG4gICAgICAgICAgICBsZXQgbWVzc2FnZT1jb25maXJtKFwi57y65bCR5Y+C5pWw77yM56Gu5a6a6KaB5L+d5a2Y5ZCX77yfXCIpO1xyXG4gICAgICAgICAgICBpZihtZXNzYWdlKXtcclxuICAgICAgICAgICAgICAgIHNhdmUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2F2ZSgpO1xyXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIHNhdmUoKXtcclxuICAgICAgICAgICAgbGV0IFVwZGF0ZUZldGNoPWF3YWl0IGZldGNoKCcvYWRtaW4vY2x1ZScse1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNhbGVzcGVyc29uOiBzYWxlc3BlcnNvbixcclxuICAgICAgICAgICAgICAgICAgICBjb21tZW50OiBzYXZlVGV4dGFyZWEsXHJcbiAgICAgICAgICAgICAgICAgICAgY3NyZjogY3NyZixcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczp7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgaWYoVXBkYXRlRmV0Y2guY29kZT09PTIwMCl7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIuS/neWtmOaIkOWKn++8gVwiKVxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uYXNzaWduKGAvYWRtaW4vY2x1ZS9yZWNvcmQ/aWQ9JHtpZH1gKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIuS/neWtmOWksei0pe+8gVwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFVwZGF0ZUZldGNoLmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGhhbmRsZXJJbnNlcnQ6IGFzeW5jIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICBsZXQgaWQ9ZXZlbnQudGFyZ2V0LmRhdGFzZXQuaWQ7XHJcbiAgICAgICAgbGV0IGFkZFRleHRhcmVhPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtdGV4dGFyZWEnKS52YWx1ZTtcclxuICAgICAgICBsZXQgY3NyZj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3NyZicpLnZhbHVlO1xyXG4gICAgICAgIGxldCB0aW1lPW5ldyBEYXRlKCk7XHJcbiAgICAgICAgaWYoIWFkZFRleHRhcmVhKXtcclxuICAgICAgICAgICAgYWxlcnQoXCLnvLrlsJHlj4LmlbDvvIFcIilcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBJbnNlcnRGZXRjaD1hd2FpdCBmZXRjaCgnL2FkbWluL2NsdWUvcmVjb3JkJyx7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBhZGRUZXh0YXJlYSxcclxuICAgICAgICAgICAgICAgIHRpbWU6IHRpbWUsXHJcbiAgICAgICAgICAgICAgICBjc3JmOiBjc3JmLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgaGVhZGVyczp7XHJcbiAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICBpZihJbnNlcnRGZXRjaC5jb2RlPT09MjAwKXtcclxuICAgICAgICAgICAgYWxlcnQoXCLmt7vliqDmiJDlip/vvIFcIik7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmFzc2lnbihgL2FkbWluL2NsdWUvcmVjb3JkP2lkPSR7aWR9YCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwi5re75Yqg5aSx6LSl77yBXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhJbnNlcnRGZXRjaC5kYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblBBR0UuaW5pdCgpOyJdfQ==