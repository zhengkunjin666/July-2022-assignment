const PAGE={init:function(){this.bind()},bind:function(){window.addEventListener("load",this.highlight),window.addEventListener("load",this.parseTime);let e=document.getElementById("select-container"),t=(e.addEventListener("mouseleave",this.selectHidden),this.onEventlister(e,"click","select-item",this.show),window.addEventListener("load",this.scorllBottom),document.getElementById("save")),n=(t.addEventListener("click",this.handlerUpdate),document.getElementById("add"));n.addEventListener("click",this.handlerInsert)},highlight:function(){let t=window.location.href,n=document.getElementsByClassName("nav-item");for(let e=0;e<n.length;e++){var a=n[e].dataset.id;-1!=t.indexOf(a)&&(n[e].className="nav-item active")}},parseTime:function(){let t=document.getElementsByClassName("time");for(let e=0;e<t.length;e++){dateTime=t[e].innerText;var n=PAGE.formatDate(dateTime);t[e].innerText="创建时间："+n}},formatDate:function(e,t="YY/MM/DD hh:mm:ss"){var e=new Date(e),n=e.getFullYear(),a=e.getMonth()+1,i=e.getDate(),d=e.getHours(),o=e.getMinutes(),e=e.getSeconds(),l=new Array(10).fill(0).map((e,t)=>"0"+t);return t.replace(/YY/g,n).replace(/MM/g,l[a]||a).replace(/DD/g,l[i]||i).replace(/hh/g,l[d]||d).replace(/mm/g,l[o]||o).replace(/ss/g,l[e]||e)},selectHidden:function(){let e=document.getElementById("select-list");e.style.display="none"},onEventlister:function(e,t,n,a){e.addEventListener(t,function(e){0<=e.target.className.indexOf(n)&&a(e)})},show:function(e){e=e.target;let t=document.getElementById("show");t.innerHTML=e.innerText},scorllBottom:function(){let e=document.getElementById("record-content");var t=e.scrollHeight;e.scrollTop=t},handlerUpdate:function(e){let t=e.target.dataset.id,n=document.getElementById("state").value.trim(),a=document.getElementById("show").innerText,i=document.getElementById("save-textarea").value,d=document.getElementById("csrf").value;if(!n||!a||!i)return confirm("缺少参数，确定要保存吗？")?void o():void 0;async function o(){var e=await fetch("/admin/clue",{method:"PUT",body:JSON.stringify({id:t,state:n,salesperson:a,comment:i,csrf:d}),headers:{"content-type":"application/json"}}).then(e=>e.json());200===e.code?(alert("保存成功！"),location.assign("/admin/clue/record?id="+t)):(alert("保存失败！"),console.log(e.data))}o()},handlerInsert:async function(e){var e=e.target.dataset.id,t=document.getElementById("add-textarea").value,n=document.getElementById("csrf").value,a=new Date;t?200===(await fetch("/admin/clue/record",{method:"POST",body:JSON.stringify({id:e,content:t,time:a,csrf:n}),headers:{"content-type":"application/json"}}).then(e=>e.json())).code?(alert("添加成功！"),location.assign("/admin/clue/record?id="+e)):alert("添加失败！"):alert("缺少参数！")}};PAGE.init();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY29yZC5qcyJdLCJuYW1lcyI6WyJQQUdFIiwiaW5pdCIsInRoaXMiLCJiaW5kIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhpZ2hsaWdodCIsInBhcnNlVGltZSIsInNlbGVjdENvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzYXZlIiwic2VsZWN0SGlkZGVuIiwib25FdmVudGxpc3RlciIsInNob3ciLCJzY29ybGxCb3R0b20iLCJhZGQiLCJoYW5kbGVyVXBkYXRlIiwiaGFuZGxlckluc2VydCIsImhyZWYiLCJsb2NhdGlvbiIsIm5hdkl0ZW0iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGV0IiwiaSIsImxlbmd0aCIsImlkIiwiZGF0YXNldCIsImNsYXNzTmFtZSIsInRpbWUiLCJkYXRlVGltZSIsImZvcm1hdERhdGUiLCJpbm5lclRleHQiLCJmb3JtYXQiLCJkYXRlIiwiRGF0ZSIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiZGF5IiwiZ2V0RGF0ZSIsImhvdXIiLCJnZXRNb250aCIsInNlYyIsInByZUFyciIsImdldEhvdXJzIiwiZmlsbCIsIm1hcCIsImVsZW0iLCJpbmRleCIsImdldE1pbnV0ZXMiLCJBcnJheSIsInJlcGxhY2UiLCJtaW4iLCJzZWxlY3RMaXN0Iiwic3R5bGUiLCJkaXNwbGF5IiwicGFyZW50Tm9kZSIsImluZGV4T2YiLCJjaGlsZENsYXNzTmFtZSIsImNhbGxiYWNrIiwiYWN0aW9uIiwiZSIsInRhcmdldCIsImlubmVySFRNTCIsInNlbGVjdEl0ZW0iLCJzY3JvbGxIZWlnaHQiLCJyZWNvcmRDb250ZW50Iiwic2Nyb2xsVG9wIiwic2FsZXNwZXJzb24iLCJzYXZlVGV4dGFyZWEiLCJ2YWx1ZSIsInRyaW0iLCJzdGF0ZSIsIm1lc3NhZ2UiLCJjb25maXJtIiwiYXN5bmMiLCJVcGRhdGVGZXRjaCIsImZldGNoIiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsImNzcmYiLCJjb250ZW50LXR5cGUiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwiY29kZSIsImFzc2lnbiIsImFsZXJ0IiwiY29uc29sZSIsImxvZyIsImRhdGEiLCJldmVudCIsImFkZFRleHRhcmVhIiwiYm9keSIsImNvbnRlbnQiLCJJbnNlcnRGZXRjaCIsImhlYWRlcnMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEtBQUksQ0FDTkMsS0FBTSxXQUNGQyxLQUFBQyxRQUVKQSxLQUFNLFdBQ0ZDLE9BQU9DLGlCQUFpQixPQUFPSCxLQUFLSSxXQUNwQ0YsT0FBT0MsaUJBQWlCLE9BQU9ILEtBQUtLLFdBQ2hDQyxJQUFBQSxFQUFnQkMsU0FBU0MsZUFBZSxvQkFJcENDLEdBSFJILEVBQWdCSCxpQkFBaUIsYUFBYUgsS0FBS1UsY0FDbkRWLEtBQUtXLGNBQWNMLEVBQWdCLFFBQVEsY0FBY04sS0FBS1ksTUFDOURWLE9BQU9DLGlCQUFpQixPQUFPSCxLQUFLYSxjQUMzQk4sU0FBU0MsZUFBZSxTQUUxQk0sR0FESEwsRUFBQ04saUJBQWlCLFFBQVFILEtBQUtlLGVBQzNCUixTQUFTQyxlQUFlLFFBQzVCTCxFQUFBQSxpQkFBaUIsUUFBUUgsS0FBS2dCLGdCQUV0Q1osVUFBVyxXQUNIYSxJQUFJQSxFQUFDZixPQUFPZ0IsU0FBU0QsS0FDckJFLEVBQVFaLFNBQVNhLHVCQUF1QixZQUM1QyxJQUFJQyxJQUFJQyxFQUFFLEVBQUVBLEVBQUVILEVBQVFJLE9BQU9ELElBQUksQ0FBN0JELElBQUtHLEVBQVRMLEVBQWNBLEdBQUFBLFFBQWRLLElBQ0ksR0FBT0wsRUFBQUEsUUFBV00sS0FFZE4sRUFBUUcsR0FBR0ksVUFBVSxxQkFFNUJyQixVQUFBLFdBeEJFZ0IsSUFBQU0sRUFBQXBCLFNBQUFhLHVCQUFBLFFBMEJQZixJQUFTZ0IsSUFBRUMsRUFBQSxFQUFBQSxFQUFBSyxFQUFVSixPQUFBRCxJQUFBLENBQ1RNLFNBQUNyQixFQUFTYSxHQUFBQSxVQUdkQyxJQUFJaEIsRUFBVVAsS0FBSytCLFdBQVdELFVBRjlCRCxFQUFN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QmpCVCxLQVRRQyIsImZpbGUiOiJyZWNvcmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBQQUdFPXtcclxuICAgIGluaXQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5iaW5kKCk7XHJcbiAgICB9LFxyXG4gICAgYmluZDogZnVuY3Rpb24oKXtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsdGhpcy5oaWdobGlnaHQpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJyx0aGlzLnBhcnNlVGltZSk7XHJcbiAgICAgICAgbGV0IHNlbGVjdENvbnRhaW5lcj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0LWNvbnRhaW5lcicpO1xyXG4gICAgICAgIHNlbGVjdENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyx0aGlzLnNlbGVjdEhpZGRlbik7XHJcbiAgICAgICAgdGhpcy5vbkV2ZW50bGlzdGVyKHNlbGVjdENvbnRhaW5lciwnY2xpY2snLCdzZWxlY3QtaXRlbScsdGhpcy5zaG93KTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsdGhpcy5zY29ybGxCb3R0b20pO1xyXG4gICAgICAgIGxldCBzYXZlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlJyk7XHJcbiAgICAgICAgc2F2ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsdGhpcy5oYW5kbGVyVXBkYXRlKTtcclxuICAgICAgICBsZXQgYWRkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQnKTtcclxuICAgICAgICBhZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHRoaXMuaGFuZGxlckluc2VydCk7XHJcbiAgICB9LFxyXG4gICAgaGlnaGxpZ2h0OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGxldCBocmVmPXdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgIGxldCBuYXZJdGVtPWRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ25hdi1pdGVtJyk7XHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTxuYXZJdGVtLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBsZXQgaWQ9bmF2SXRlbVtpXS5kYXRhc2V0LmlkO1xyXG4gICAgICAgICAgICBpZihocmVmLmluZGV4T2YoaWQpICE9IC0xKXtcclxuICAgICAgICAgICAgICAgIG5hdkl0ZW1baV0uY2xhc3NOYW1lPVwibmF2LWl0ZW0gYWN0aXZlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgcGFyc2VUaW1lOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGxldCB0aW1lPWRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RpbWUnKTtcclxuICAgICAgICBmb3IobGV0IGk9MDtpPHRpbWUubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIGRhdGVUaW1lPXRpbWVbaV0uaW5uZXJUZXh0O1xyXG4gICAgICAgICAgICBsZXQgcGFyc2VUaW1lPVBBR0UuZm9ybWF0RGF0ZShkYXRlVGltZSk7XHJcbiAgICAgICAgICAgIHRpbWVbaV0uaW5uZXJUZXh0PWDliJvlu7rml7bpl7TvvJoke3BhcnNlVGltZX1gO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBmb3JtYXREYXRlOiBmdW5jdGlvbih0aW1lLGZvcm1hdD0nWVkvTU0vREQgaGg6bW06c3MnKXtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpO1xyXG4gICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSsxLFxyXG4gICAgICAgICAgICBkYXkgPSBkYXRlLmdldERhdGUoKSxcclxuICAgICAgICAgICAgaG91ciA9IGRhdGUuZ2V0SG91cnMoKSxcclxuICAgICAgICAgICAgbWluID0gZGF0ZS5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAgIHNlYyA9IGRhdGUuZ2V0U2Vjb25kcygpO1xyXG4gICAgICAgIHZhciBwcmVBcnIgPSBuZXcgQXJyYXkoMTApLmZpbGwoMCkubWFwKChlbGVtLCBpbmRleCk9PntcclxuICAgICAgICAgICAgcmV0dXJuICcwJytpbmRleDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgbmV3VGltZSA9IGZvcm1hdC5yZXBsYWNlKC9ZWS9nLHllYXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvTU0vZyxwcmVBcnJbbW9udGhdfHxtb250aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9ERC9nLHByZUFycltkYXldfHxkYXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvaGgvZyxwcmVBcnJbaG91cl18fGhvdXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvbW0vZyxwcmVBcnJbbWluXXx8bWluKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3NzL2cscHJlQXJyW3NlY118fHNlYyk7XHJcbiAgICAgICAgcmV0dXJuIG5ld1RpbWU7XHRcdFx0XHJcbiAgICB9LFxyXG4gICAgc2VsZWN0SGlkZGVuOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGxldCBzZWxlY3RMaXN0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3QtbGlzdCcpO1xyXG4gICAgICAgIHNlbGVjdExpc3Quc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgIH0sXHJcbiAgICBvbkV2ZW50bGlzdGVyOiBmdW5jdGlvbihwYXJlbnROb2RlLGFjdGlvbixjaGlsZENsYXNzTmFtZSxjYWxsYmFjayl7XHJcbiAgICAgICAgcGFyZW50Tm9kZS5hZGRFdmVudExpc3RlbmVyKGFjdGlvbixmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoY2hpbGRDbGFzc05hbWUpPj0wICYmIGNhbGxiYWNrKGUpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgc2hvdzogZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgIGxldCBzZWxlY3RJdGVtPWV2ZW50LnRhcmdldDtcclxuICAgICAgICBsZXQgc2hvdz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvdycpO1xyXG4gICAgICAgIHNob3cuaW5uZXJIVE1MPXNlbGVjdEl0ZW0uaW5uZXJUZXh0O1xyXG4gICAgfSxcclxuICAgIHNjb3JsbEJvdHRvbTogZnVuY3Rpb24oKXtcclxuICAgICAgICBsZXQgcmVjb3JkQ29udGVudD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkLWNvbnRlbnQnKTtcclxuICAgICAgICBsZXQgc2Nyb2xsSGVpZ2h0PXJlY29yZENvbnRlbnQuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgIHJlY29yZENvbnRlbnQuc2Nyb2xsVG9wPXNjcm9sbEhlaWdodDtcclxuICAgIH0sXHJcbiAgICBoYW5kbGVyVXBkYXRlOiBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgbGV0IGlkPWV2ZW50LnRhcmdldC5kYXRhc2V0LmlkO1xyXG4gICAgICAgIGxldCBzdGF0ZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdGUnKS52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgbGV0IHNhbGVzcGVyc29uPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaG93JykuaW5uZXJUZXh0O1xyXG4gICAgICAgIGxldCBzYXZlVGV4dGFyZWE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUtdGV4dGFyZWEnKS52YWx1ZTtcclxuICAgICAgICBsZXQgY3NyZj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3NyZicpLnZhbHVlO1xyXG4gICAgICAgIGlmKCFzdGF0ZSB8fCAhc2FsZXNwZXJzb24gfHwgIXNhdmVUZXh0YXJlYSl7XHJcbiAgICAgICAgICAgIGxldCBtZXNzYWdlPWNvbmZpcm0oXCLnvLrlsJHlj4LmlbDvvIznoa7lrpropoHkv53lrZjlkJfvvJ9cIik7XHJcbiAgICAgICAgICAgIGlmKG1lc3NhZ2Upe1xyXG4gICAgICAgICAgICAgICAgc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzYXZlKCk7XHJcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2F2ZSgpe1xyXG4gICAgICAgICAgICBsZXQgVXBkYXRlRmV0Y2g9YXdhaXQgZmV0Y2goJy9hZG1pbi9jbHVlJyx7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogc3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2FsZXNwZXJzb246IHNhbGVzcGVyc29uLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IHNhdmVUZXh0YXJlYSxcclxuICAgICAgICAgICAgICAgICAgICBjc3JmOiBjc3JmLFxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOntcclxuICAgICAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgICAgICBpZihVcGRhdGVGZXRjaC5jb2RlPT09MjAwKXtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwi5L+d5a2Y5oiQ5Yqf77yBXCIpXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5hc3NpZ24oYC9hZG1pbi9jbHVlL3JlY29yZD9pZD0ke2lkfWApO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwi5L+d5a2Y5aSx6LSl77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coVXBkYXRlRmV0Y2guZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlckluc2VydDogYXN5bmMgZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgIGxldCBpZD1ldmVudC50YXJnZXQuZGF0YXNldC5pZDtcclxuICAgICAgICBsZXQgYWRkVGV4dGFyZWE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC10ZXh0YXJlYScpLnZhbHVlO1xyXG4gICAgICAgIGxldCBjc3JmPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjc3JmJykudmFsdWU7XHJcbiAgICAgICAgbGV0IHRpbWU9bmV3IERhdGUoKTtcclxuICAgICAgICBpZighYWRkVGV4dGFyZWEpe1xyXG4gICAgICAgICAgICBhbGVydChcIue8uuWwkeWPguaVsO+8gVwiKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IEluc2VydEZldGNoPWF3YWl0IGZldGNoKCcvYWRtaW4vY2x1ZS9yZWNvcmQnLHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGFkZFRleHRhcmVhLFxyXG4gICAgICAgICAgICAgICAgdGltZTogdGltZSxcclxuICAgICAgICAgICAgICAgIGNzcmY6IGNzcmYsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBoZWFkZXJzOntcclxuICAgICAgICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgIGlmKEluc2VydEZldGNoLmNvZGU9PT0yMDApe1xyXG4gICAgICAgICAgICBhbGVydChcIua3u+WKoOaIkOWKn++8gVwiKTtcclxuICAgICAgICAgICAgbG9jYXRpb24uYXNzaWduKGAvYWRtaW4vY2x1ZS9yZWNvcmQ/aWQ9JHtpZH1gKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgYWxlcnQoXCLmt7vliqDlpLHotKXvvIFcIik7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKEluc2VydEZldGNoLmRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuUEFHRS5pbml0KCk7Il19