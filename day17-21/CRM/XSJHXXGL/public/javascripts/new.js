const PAGE={init:function(){this.bind()},bind:function(){window.addEventListener("load",this.highlight);let e=document.getElementById("new-submit"),t=(e.addEventListener("click",this.handlerInsert),document.getElementById("new-phone"));t.addEventListener("focus",this.errorText)},highlight:function(){let t=window.location.href,n=document.getElementsByClassName("nav-item");for(let e=0;e<n.length;e++){var i=n[e].dataset.id;-1!=t.indexOf(i)&&(n[e].className="nav-item active")}},handlerInsert:async function(){var e=document.getElementById("new-name").value.trim(),t=document.getElementById("new-phone").value.trim(),n=document.getElementById("new-password").value.trim(),i=document.getElementById("new-role").value.trim(),o=document.getElementById("csrf").value;if(e&&t&&n&&i)if(PAGE.isMobile(t))200===(await fetch("/admin/user",{method:"POST",body:JSON.stringify({name:e,phone:t,password:n,role:i,csrf:o}),headers:{"content-type":"application/json"}}).then(e=>e.json())).code?confirm("新增成功，确定返回用户列表吗？")&&location.assign("/admin/user"):alert("新增失败！");else{let e=document.getElementById("errorText");void(e.innerText="手机格式不正确")}else alert("缺少参数！")},isMobile:function(e){return/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/.test(e)},errorText:function(){let e=document.getElementById("errorText");e.innerText=""}};PAGE.init();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldy5qcyJdLCJuYW1lcyI6WyJQQUdFIiwiaW5pdCIsInRoaXMiLCJiaW5kIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhpZ2hsaWdodCIsIm5ld1N1Ym1pdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJuZXdQaG9uZSIsImhhbmRsZXJJbnNlcnQiLCJlcnJvclRleHQiLCJocmVmIiwibG9jYXRpb24iLCJuYXZJdGVtIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImxldCIsImkiLCJsZW5ndGgiLCJpZCIsImRhdGFzZXQiLCJjbGFzc05hbWUiLCJhc3luYyIsIm5hbWUiLCJ2YWx1ZSIsInRyaW0iLCJwYXNzd29yZCIsInBob25lIiwicm9sZSIsImFsZXJ0IiwiaXNNb2JpbGUiLCJmZXRjaCIsImlubmVyVGV4dCIsImNzcmYiLCJoZWFkZXJzIiwiY29udGVudC10eXBlIiwicmVzcG9uc2UiLCJqc29uIiwiY29uZmlybSIsImFzc2lnbiIsIm1lc3NhZ2UiLCJ0ZXN0IiwidmFsIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxLQUFJLENBQ05DLEtBQU0sV0FDRkMsS0FBQUMsUUFFSkEsS0FBTSxXQUNGQyxPQUFPQyxpQkFBaUIsT0FBT0gsS0FBS0ksV0FDaENDLElBQUFBLEVBQVVDLFNBQVNDLGVBQWUsY0FFbENDLEdBREpILEVBQVVGLGlCQUFpQixRQUFRSCxLQUFLUyxlQUMzQkgsU0FBU0MsZUFBZSxjQUNyQ0MsRUFBU0wsaUJBQWlCLFFBQVFILEtBQUtVLFlBRTNDTixVQUFXLFdBQ0hPLElBQUlBLEVBQUNULE9BQU9VLFNBQVNELEtBQ3JCRSxFQUFRUCxTQUFTUSx1QkFBdUIsWUFDNUMsSUFBSUMsSUFBSUMsRUFBRSxFQUFFQSxFQUFFSCxFQUFRSSxPQUFPRCxJQUFJLENBQTdCRCxJQUFLRyxFQUFUTCxFQUFjQSxHQUFBQSxRQUFkSyxJQUNJLEdBQU9MLEVBQUFBLFFBQVdNLEtBRWROLEVBQVFHLEdBQUdJLFVBQVUscUJBRTVCWCxjQUFBWSxpQkFuQkVOLElBQUFPLEVBQUFoQixTQUFBQyxlQUFBLFlBQUFnQixNQUFBQyxPQXFCUGYsRUFBZUgsU0FBQUMsZUFBZ0IsYUFBQWdCLE1BQUFDLE9BQ25CQyxFQUFDbkIsU0FBU0MsZUFBZSxnQkFBeEJnQixNQUFUQyxPQUNJRSxFQUFNcEIsU0FBU0MsZUFBZSxZQUFhZ0IsTUFBTUMsT0FDakRDLEVBQVFuQixTQUFDQSxlQUFTQyxRQUFlZ0IsTUFDakNJLEdBQUlMLEdBQUNoQixHQUFTQyxHQUFlb0IsRUFHN0JDLEdBQU05QixLQUFBK0IsU0FBTkgsR0FVcUIsYUFGSEksTUFBTSxjQUFjLENBTHRDaEMsT0FBSytCLE9BQ0RuQixLQUFBQSxLQUFVSixVQUFTQyxDQUNid0IsS0FBQUEsRUFDVkwsTUFBQUEsRUFDSEQsU0FBQUEsRUFPT0UsS0FBTUEsRUFQYkssS0FBQUEsSUFFU0MsUUFEZ0MsQ0FFNUJDLGVBQVcsc0JBRWpCUixLQUFPQSxHQUZVUyxFQUFBQyxTQUdQWCxLQUhPWSxRQUFBLG9CQUZpQnpCLFNBQUEwQixPQUFBLGVBUzlCVixNQUFBLGFBakJSLENBQ0FiLElBQUFMLEVBQUFKLFNBQUFDLGVBQUEsa0JBQ0hHLEVBQUFxQixVQUFBLGdCQUpPSCxNQUFDdEIsVUFpQ2J1QixTQVRZVSxTQUFRRixHQVVoQixNQUFPLCtFQUErRUcsS0FBS0MsSUFFL0YvQixVQVZZRSxXQUNIRyxJQUFBTCxFQUFBSixTQUFBQyxlQUFBLGFBSkxHLEVBS0txQixVQUFBLEtBYWJqQyxLQW5FV0MiLCJmaWxlIjoibmV3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUEFHRT17XHJcbiAgICBpbml0OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMuYmluZCgpO1xyXG4gICAgfSxcclxuICAgIGJpbmQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLHRoaXMuaGlnaGxpZ2h0KTtcclxuICAgICAgICBsZXQgbmV3U3VibWl0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctc3VibWl0Jyk7XHJcbiAgICAgICAgbmV3U3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyx0aGlzLmhhbmRsZXJJbnNlcnQpO1xyXG4gICAgICAgIGxldCBuZXdQaG9uZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXBob25lJyk7XHJcbiAgICAgICAgbmV3UGhvbmUuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLHRoaXMuZXJyb3JUZXh0KTtcclxuICAgIH0sXHJcbiAgICBoaWdobGlnaHQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbGV0IGhyZWY9d2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgbGV0IG5hdkl0ZW09ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbmF2LWl0ZW0nKTtcclxuICAgICAgICBmb3IobGV0IGk9MDtpPG5hdkl0ZW0ubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIGxldCBpZD1uYXZJdGVtW2ldLmRhdGFzZXQuaWQ7XHJcbiAgICAgICAgICAgIGlmKGhyZWYuaW5kZXhPZihpZCkgIT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgbmF2SXRlbVtpXS5jbGFzc05hbWU9XCJuYXYtaXRlbSBhY3RpdmVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBoYW5kbGVySW5zZXJ0OiBhc3luYyBmdW5jdGlvbigpe1xyXG4gICAgICAgIGxldCBuYW1lPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctbmFtZScpLnZhbHVlLnRyaW0oKTtcclxuICAgICAgICBsZXQgcGhvbmU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1waG9uZScpLnZhbHVlLnRyaW0oKTtcclxuICAgICAgICBsZXQgcGFzc3dvcmQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1wYXNzd29yZCcpLnZhbHVlLnRyaW0oKTtcclxuICAgICAgICBsZXQgcm9sZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXJvbGUnKS52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgbGV0IGNzcmY9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NzcmYnKS52YWx1ZTtcclxuICAgICAgICBpZighbmFtZSB8fCAhcGhvbmUgfHwgIXBhc3N3b3JkIHx8ICFyb2xlKXtcclxuICAgICAgICAgICAgYWxlcnQoXCLnvLrlsJHlj4LmlbDvvIFcIilcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZighUEFHRS5pc01vYmlsZShwaG9uZSkpe1xyXG4gICAgICAgICAgICBsZXQgZXJyb3JUZXh0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvclRleHQnKTtcclxuICAgICAgICAgICAgZXJyb3JUZXh0LmlubmVyVGV4dD1cIuaJi+acuuagvOW8j+S4jeato+ehrlwiO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCBJbnNlcnRGZXRjaD1hd2FpdCBmZXRjaCgnL2FkbWluL3VzZXInLHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICBwaG9uZTogcGhvbmUsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICByb2xlOiByb2xlLFxyXG4gICAgICAgICAgICAgICAgY3NyZjogY3NyZixcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIGhlYWRlcnM6e1xyXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgICAgaWYoSW5zZXJ0RmV0Y2guY29kZT09PTIwMCl7XHJcbiAgICAgICAgICAgIGxldCBtZXNzYWdlPWNvbmZpcm0oXCLmlrDlop7miJDlip/vvIznoa7lrprov5Tlm57nlKjmiLfliJfooajlkJfvvJ9cIik7XHJcbiAgICAgICAgICAgIGlmKG1lc3NhZ2Upe1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uYXNzaWduKFwiL2FkbWluL3VzZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgYWxlcnQoXCLmlrDlop7lpLHotKXvvIFcIik7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKEluc2VydEZldGNoLmRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBpc01vYmlsZTogZnVuY3Rpb24odmFsKXtcclxuICAgICAgICByZXR1cm4gL14oMTNbMC05XXwxNFswMTQ1Njg3OV18MTVbMC0zNS05XXwxNlsyNTY3XXwxN1swLThdfDE4WzAtOV18MTlbMC0zNS05XSlcXGR7OH0kLy50ZXN0KHZhbCk7XHJcbiAgICB9LFxyXG4gICAgZXJyb3JUZXh0OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGxldCBlcnJvclRleHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yVGV4dCcpO1xyXG4gICAgICAgIGVycm9yVGV4dC5pbm5lclRleHQ9XCJcIjtcclxuICAgIH0sXHJcbn07XHJcblBBR0UuaW5pdCgpOyJdfQ==